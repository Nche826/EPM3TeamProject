<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default}">


<th:block layout:fragment="customCss">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <!-- SweetAlert2 -->
  <link rel="stylesheet" href="plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
  <!-- Toastr -->
  <link rel="stylesheet" href="plugins/toastr/toastr.min.css">
   <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  
</th:block>


<th:block layout:fragment="customTitle">
	
</th:block>

<th:block layout:fragment="customScript">

</th:block>



<th:block layout:fragment="customContents">
	<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>단말기 관리</h1>
          </div>
          <div class="col-sm-6 breadcrumb float-sm-right">
   			<ol class="breadcrumb float-sm-right">	   				　	
				<button type="button" class="btn btn-info btn-sm pd-x-5 pd-y-0" data-toggle="modal" data-target="#modal-lg"> 단말기 입고 </button>			
			</ol>
		</div>   
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">      
      
      <!-- /.modal -->
      <div class="modal fade" id="modal-lg" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">단말기 입고</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            
			 <form action ="/deviceInsert" method="post">
            <div class="modal-body">
                            
              <div  class="row mg-t-20 mg-b-20" th:include="device/deviceInsert :: dInsert"></div>
              
            </div>
            <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">닫기</button>                            
              <input type="submit" class="btn btn-primary" value="확인">
            </div>
            </form>
            
            
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div>      
      
     

		<div class="row">
          <div class="col-12">
          	<div class="card">
              <div class="card-header">
                <h3 class="card-title">휴대폰/태블릿 등의단말기를 관리하실 수 있습니다</h3>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <table id="example2" class="table table-bordered table-striped">
                  <thead>
                  <div class="form-inline">
                  <div class="pull-left mg-b-10 mg-r-10 input-group input-group-sm wd-250">
					<input type="text" name="sdate" class="form-control form-control-sm fc-datepicker hasDatepicker" maxlength="10" placeholder="YYYY-MM-DD" id="dp1592198183298">
					-
					<input type="text" name="edate" class="form-control form-control-sm fc-datepicker hasDatepicker" maxlength="10" placeholder="YYYY-MM-DD" id="dp1592198183299">
				  </div> 
				  
				  <div class="pull-left mg-b-10 mg-r-10" style="margin: 5px;">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateDay(0)" value="오늘">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateDay(-7)" value="1주일">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateMon(0)" value="당월">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateMon(-1)" value="전월">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateMon(-2)" value="전전월">
					<input type="button" class="btn btn-secondary btn-sm" onclick="inputDateClean()" value="X">
				</div>			  
				           
						</div>	
					<div class="form-inline">
					                  
							<select class="form-control" style="margin: 5px;">
	                          <option value="">보유</option>
	                          <option value="">신규</option>
	                          <option value="">교품</option>
	                          <option value="">철회</option>
	                          <option value="">----</option>
	                          <option value="">개통</option>
	                          <option value="">판매</option>
	                          <option value="">반품</option>
	                       
	                        </select>
							<select class="form-control" style="margin: 5px;">
	                          <option value="">거래처</option>
	                          <option value="">거래처1</option>
	                          <option value="">거래처2</option>
	                          <option value="">거래처3</option>
	                        </select>	                        
							<select class="form-control" style="margin: 5px;">
	                          <option value="">직원</option>
	                          <option value="">직원1</option>
	                          <option value="">직원2</option>
	                          <option value="">직원3</option>
	                          <option value="">직원4</option>
	                        </select>

							<div id="example1_filter" class="dataTables_filter">
								<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="example1">
							</div>
						
							<button type="submit" class="form-control btn btn-block btn-secondary" style="margin: 5px;">검색</button>	
							
							<div class="dataTables_length" id="example1_length" style="margin: 10px;">							
									<select name="example1_length" aria-controls="example1" class="custom-select custom-select-sm form-control form-control-sm" style="align: bottom;">
										<option value="10">목록 10개씩 보기</option>
										<option value="25">목록 25개씩 보기</option>
										<option value="50">목록 50개씩 보기</option>
										<option value="100">목록 100개씩 보기</option>
									</select>											
							</div>
							</div>
					
                 <tr>
                    <th>상태</th>
                    <th>입고일</th>
                    <th>거래처</th>
                    <th>통신사</th>
                    <th>종류</th>
                    <th>일련번호</th>
                    <th>모델명</th>
                    <th>색상</th>
                    <th>입고가</th>
                    <th>매장</th>
                    <th>직원</th>                    
                    <th>입고방법</th>
                    <th>비고</th>
                    <th>등록일</th>
                    <th>관리</th>    
                      
                </tr>
                  </thead>
                  <tbody > 
                                  
                 <tr th:each="d : ${deviceList}" >                 
					<td	th:text="${d.deviceinStatus}"></td>	
					<td th:text="${d.deviceinDate}"></td>	
					<td th:text="${d.deviceinDealler}"></td>	
					<td th:text="${d.deviceTelecom}"></td>
					<td th:text="${d.deviceType}"></td>
					<td th:text="${d.deviceinSerial}"></td>			            
		            <td th:text="${d.deviceModel}"></td>
		            <td	th:text="${d.deviceColor}"></td>
		            <td th:text="${d.devicePrice}"></td>
		            <td th:text="${d.storeName}"></td>		         		              
		            <td th:text="${d.deviceinStaff}"></td>	
		            <td th:text="${d.infoMethod}"></td>	
					<td th:text="${d.deviceinMemo}"></td>
					<td th:text="${d.deviceinRegDate}"></td>									
					<td>
	                    <button type="button" class="btn btn-info btn-sm pd-x-5 pd-y-0" id="infobtn" data-toggle="modal" data-target="#modal-Info"><i class="icon ion-ios-browsers"></i></button>
	       					                                       
                    
                    <!-- /.modal -->
      <div class="modal fade" id="modal-Info" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title col-sm-6">단말기 정보</h4>
              <div class="col-sm-6" >
					<button class="btn btn-info btn-sm pd-x-5 pd-y-0" style="margin:5px" data-toggle="modal" data-target="#modal-Update"><i class="fa fa-wrench"></i></button> 					
					<button class="btn btn-info btn-sm pd-x-5 pd-y-0" style="margin:5px" data-toggle="modal" data-target="#modal-Delete"><i class="fa fa-trash"></i></button>
					</div> 
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            <div class="modal-body">
                            
              <div th:include="device/deviceInfo :: dInfo"></div>
 
            </div>
            <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">닫기</button>
              
            </div>
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div> 
                    <!-- /.modal -->
      <div class="modal fade" id="modal-Update" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title col-sm-6">단말기 정보 수정</h4>              
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            <form action ="/deviceUpdate" method="post">
            <div class="modal-body">            
                            
              <div class="row mg-t-20 mg-b-20" th:include="device/deviceUpdate :: dUpdate"></div>
              
            </div>
            <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
              <input type="submit" class="btn btn-primary" value="확인">              
            </div>
            </form>
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div> 
       <!-- modal delete -->
      <div class="modal fade" id="modal-Delete" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title col-sm-6">안내</h4>              
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            <form action ="/deviceDelete" method="post">            
            <div class="modal-body">       
            	<input type="text" name="deleteCode" th:value="${d.deviceinCode}"> 
            	  삭제하시겠습니까?
            </div>
            <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
              <input type="submit" class="btn btn-primary" value="확인">
            </div>
            </form>
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div>    
                    
                    </td>                   
                  </tr>  
                   
                 </tbody>
                </table>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->


</th:block>
<th:block layout:fragment="customFooterScript">

<!-- DataTables -->
<script src="/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<!-- SweetAlert2 -->
<script src="/plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- Toastr -->
<script src="/plugins/toastr/toastr.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/dist/js/demo.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/dist/js/demo.js"></script>
<!-- page script -->
<script>
  $(function () {
    $("#example1").DataTable({
      "responsive": true,
      "autoWidth": false,
      "aaSorting":[],
      "aoColumnDefs":[
         {'bSortable': false, 'aTargets':[0,2,3,4,5,6,7,9,10,11,12]}
      ]
    });
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
      "aaSorting":[],
      "aoColumnDefs":[
         {'bSortable': false, 'aTargets':[0,2,3,4,5,6,7,9,10,11,12]}
      ]
      });    
     $(document).on('click','#infobtn',function(){
    	 var str = ""
 			var tdArr = new Array();	// 배열 선언
 			var infobtn = $(this);
 			// checkBtn.parent() : checkBtn의 부모는 <td>이다.
 			// checkBtn.parent().parent() : <td>의 부모이므로 <tr>이다.
 			var tr = infobtn.parent().parent();
 			var td = tr.children();
 			
 			console.log("클릭한 Row의 모든 데이터 : "+tr.text());
 			
 			var infostatus = td.eq(0).text();
 			var infodate = td.eq(1).text();
 			var infodealler = td.eq(2).text();
 			var infotelecom = td.eq(3).text(); 
 			var infotype = td.eq(4).text(); 
 			var infoserial = td.eq(5).text(); 
 			var infomodel = td.eq(6).text(); 
 			var infocolor = td.eq(7).text(); 
 			var infoprice = td.eq(8).text(); 
 			var infostore = td.eq(9).text(); 
 			var infostaff = td.eq(10).text(); 
 			var infomemo = td.eq(12).text();  			
 			var inforegdate = td.eq(13).text();
 			var infomethod = td.eq(11).text();
 			
 			$('#infoserial').text(infoserial);
 			$('#infodealler').text(infodealler);
 			$('#infotelecom').text(infotelecom);
 			$('#infomodel').text(infomodel);
 			$('#infotype').text(infotype);
 			$('#infocolor').text(infocolor);
 			$('#infoprice').text(infoprice);
 			$('#infostatus').text(infostatus);
 			$('#infostore').text(infostore);
 			$('#infostaff').text(infostaff);
 			$('#infodate').text(infodate);
 			$('#infomethod').text(infomethod);
 			$('#infomemo').text(infomemo);
 			$('#inforegdate').text(inforegdate);
 	
 			
     });
    	
  });  
  
</script>



</th:block>





</html>